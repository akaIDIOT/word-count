<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8" />
    <title> PyCon.here </title>
    <link href="assets/default.css" rel="stylesheet" type="text/css" />
    <link href="assets/pygments.css" rel="stylesheet" type="text/css" />
</head>
<body>

<div id="impress" data-transition-duration="150">
    
        <div class="slide step">
            <h1>Python alsof het <em>echte</em> software is</h1>
<p><img alt="DUPLO" src="assets/duplo.svg" /></p>

            <div class="slide-num">
                1 / 17
            </div>
        </div>
    
        <div class="slide step">
            <h2>Hoezo?!</h2>
<ul>
<li>FBDA's weapon of choice</li>
<li>zowel losse scripts  als 'libs'</li>
<li>herbruikbaarheid non-triviaal</li>
<li>geringe ervaring met tooling</li>
<li>impulsgroep DUPLO™</li>
</ul>

            <div class="slide-num">
                2 / 17
            </div>
        </div>
    
        <div class="slide step">
            <h2>Invulling</h2>
<ul>
<li>typisch los script (doet het!): <code>wordcount.py</code></li>
<li>nou nog herbruikbaar…</li>
<li>spelen met veelgebruikte tooling<ul>
<li><code>pytest</code>, <code>setuptools</code>, <code>sphinx</code>, <code>tox</code>, <code>wheel</code>, …</li>
<li>PyCharm</li>
</ul>
</li>
</ul>

            <div class="slide-num">
                3 / 17
            </div>
        </div>
    
        <div class="slide step">
            <h2>Not Invented Here™</h2>
<ul>
<li>github's trending python projects als inspiratie (<code>keras</code>, <code>requests</code>, …)</li>
<li>project-layout (<code>test_dingen.py</code> of <code>tests/test_iets.py</code>, …)</li>
<li>gebruikte tools (<code>pytest</code> of <code>unittest2</code>, …)</li>
</ul>

            <div class="slide-num">
                4 / 17
            </div>
        </div>
    
        <div class="slide step">
            <h2>What TODO</h2>
<ul>
<li><code>virtualenv</code></li>
<li>unittests met <code>pytest</code></li>
<li>packaging met <code>setuptools</code> en <code>wheel</code></li>
<li>documentatie met <code>sphinx</code></li>
<li>automatisering met <code>tox</code></li>
<li>eventueel<ul>
<li>'lint' met <code>flake8</code></li>
<li>test/code coverage met <code>coverage</code></li>
</ul>
</li>
</ul>

            <div class="slide-num">
                5 / 17
            </div>
        </div>
    
        <div class="slide step">
            <h2>Requirements</h2>
<ul>
<li><code>git --version</code></li>
<li><code>python3 --version</code></li>
<li><code>pip --version</code> (verwijst naar welke versie van Python?)<ul>
<li>eventueel <code>pip3</code></li>
</ul>
</li>
<li><code>pip show pip</code></li>
<li>PyCharm (community of professional)</li>
</ul>

            <div class="slide-num">
                6 / 17
            </div>
        </div>
    
        <div class="slide step">
            <h2>Woordjes tellen</h2>
<ul>
<li>live meeklikken (of kopie-pasta): <code>https://akaidiot.github.com/word-count/</code></li>
</ul>
<div class="codehilite"><pre><span></span>$ git clone https://github.com/akaIDIOT/word-count.git
$ python3 wordcount.py map/met/tekst
[(&#39;de&#39;, 123), (&#39;het&#39;, 45), (&#39;een&#39;, 6)]
</pre></div>


<ul>
<li>PyCharm</li>
<li><code>virtualenv</code></li>
</ul>

            <div class="slide-num">
                7 / 17
            </div>
        </div>
    
        <div class="slide step">
            <h2>Virtual reality</h2>
<p>Alle DUPLO-blokken netjes in de doos:</p>
<div class="codehilite"><pre><span></span>$ pip install virtualenv
$ virtualenv --python python3 pad/naar/env
$ source pad/naar/env/activate   # *nix
$ pad\naar\env\Scripts\activate  # windows
</pre></div>

            <div class="slide-num">
                8 / 17
            </div>
        </div>
    
        <div class="slide step">
            <h2>Virtual reality: PyCharm</h2>
<p><img alt="interpreter in PyCharm" src="assets/project-interpreter.png" /></p>

            <div class="slide-num">
                9 / 17
            </div>
        </div>
    
        <div class="slide step">
            <h2>Unit tests</h2>
<ul>
<li>een 'unit' is klein</li>
<li><code>wordcount.py</code> is niet handig testbaar ☹ (één unit)</li>
<li>eerst fixen of eerst tests maken?<ul>
<li>pragmatisme of test driven development</li>
</ul>
</li>
</ul>

            <div class="slide-num">
                10 / 17
            </div>
        </div>
    
        <div class="slide step">
            <h2>Unit tests: pytest</h2>
<div class="codehilite"><pre><span></span>$ pip install pytest
</pre></div>


<p><code>tests/test_wordcount.py</code>:</p>
<div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">test_tokenize</span><span class="p">():</span>
    <span class="n">text</span> <span class="o">=</span> <span class="s1">&#39;De kat krabt de krullen van de trap.&#39;</span>
    <span class="n">words</span> <span class="o">=</span> <span class="n">tokenize</span><span class="p">(</span><span class="n">text</span><span class="p">)</span>

    <span class="k">assert</span> <span class="s1">&#39;krullen&#39;</span> <span class="ow">in</span> <span class="n">words</span>
    <span class="k">assert</span> <span class="s1">&#39;trap&#39;</span> <span class="ow">in</span> <span class="n">words</span>
</pre></div>

            <div class="slide-num">
                11 / 17
            </div>
        </div>
    
        <div class="slide step">
            <h2>Unit tests: PyCharm</h2>
<p><img alt="pytest in PyCharm" src="assets/test-runner.png" /></p>
<p>Rechts-klik op <code>tests</code>, ▶ Run 'py.test in tests'</p>

            <div class="slide-num">
                12 / 17
            </div>
        </div>
    
        <div class="slide step">
            <h2>Bonus tests</h2>
<p><code>pytest</code> heeft handige helpers, <code>pyhamcrest</code>¹ maakt één en ander leesbaarder:</p>
<div class="codehilite"><pre><span></span><span class="nd">@pytest.mark.parametrize</span><span class="p">(</span><span class="s1">&#39;text, words&#39;</span><span class="p">,</span> <span class="p">[</span>
    <span class="p">(</span><span class="s1">&#39;test&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;test&#39;</span><span class="p">]),</span>
    <span class="p">(</span><span class="s1">&#39;testing</span><span class="se">\n</span><span class="s1">123&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;testing&#39;</span><span class="p">,</span> <span class="s1">&#39;123&#39;</span><span class="p">]),</span>
<span class="p">])</span>
<span class="k">def</span> <span class="nf">test_tokenize</span><span class="p">(</span><span class="n">text</span><span class="p">,</span> <span class="n">words</span><span class="p">):</span>
    <span class="n">assert_that</span><span class="p">(</span><span class="n">tokenize</span><span class="p">(</span><span class="n">text</span><span class="p">),</span>
                <span class="n">contains_inanyorder</span><span class="p">(</span><span class="o">*</span><span class="n">words</span><span class="p">))</span>
</pre></div>


<p><code>mock</code> / <code>unittest.mock</code> kan dingen die in de weg zitten (HTTP-requests, database-cursors, …) 'mocken'</p>
<hr />
<p>¹: importeer uit module <code>hamcrest</code></p>

            <div class="slide-num">
                13 / 17
            </div>
        </div>
    
        <div class="slide step">
            <h2>Documentatie: Spinx</h2>
<p>Krachtige tool, maar veel TLC nodig…</p>
<div class="codehilite"><pre><span></span>$ pip install sphinx
$ cd …/word-count
$ sphinx-quickstart
&gt; Root path for the documentation [.]: docs
&gt; autodoc: automatically insert docstrings from modules (y/n) [n]: y
&gt; Create Makefile? (y/n) [y]: n
&gt; Create Windows command file? (y/n) [y]: n
</pre></div>

            <div class="slide-num">
                14 / 17
            </div>
        </div>
    
        <div class="slide step">
            <h2>Documentatie: <code>conf.py</code></h2>
<div class="codehilite"><pre><span></span><span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">sys</span>
<span class="n">sys</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">abspath</span><span class="p">(</span><span class="s1">&#39;..&#39;</span><span class="p">))</span>
</pre></div>

            <div class="slide-num">
                15 / 17
            </div>
        </div>
    
        <div class="slide step">
            <h2>Documentatie: <code>index.rst</code></h2>
<div class="codehilite"><pre><span></span><span class="p">..</span> <span class="ow">toctree</span><span class="p">::</span>
   <span class="nc">:maxdepth:</span> <span class="nf">2</span>
   <span class="nc">:caption:</span> <span class="nf">Contents:</span>

   api
</pre></div>

            <div class="slide-num">
                16 / 17
            </div>
        </div>
    
        <div class="slide step">
            <h2>Documentatie: <code>api.rst</code></h2>
<div class="codehilite"><pre><span></span><span class="gh">API Docs</span>
<span class="gh">========</span>

<span class="p">..</span> <span class="ow">automodule</span><span class="p">::</span> wordcount
   <span class="nc">:members:</span>
   <span class="nc">:undoc-members:</span>
</pre></div>


<p>Niet per se fijn, eventueel in <code>conf.py</code>:</p>
<div class="codehilite"><pre><span></span><span class="n">autodoc_default_flags</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;members&#39;</span><span class="p">,</span> <span class="s1">&#39;undoc-members&#39;</span><span class="p">]</span>
</pre></div>


<p>Zie <a href="http://www.sphinx-doc.org/en/stable/ext/autodoc.html">Sphinx' <code>autodoc</code> doc</a> voor meer</p>

            <div class="slide-num">
                17 / 17
            </div>
        </div>
    
</div>

<script src="assets/impress.js"></script>
<script>
    impress().init();
</script>

</body>

</html>